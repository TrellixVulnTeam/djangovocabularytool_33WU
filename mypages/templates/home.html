{% extends 'base.html' %}
{% load socialaccount %}

{% block content %}


<header>
    <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
</header>


<div class="whole">
<br>
{% if user.is_authenticated %}
  <h2>Welcome, {{ user.username }}!<button class="mdc-button mdc-button--raised" name="delete" style="float: right;">
    <a href="accounts/logout" style="color: #fafafa; text-decoration: none;">
    <div class="mdc-button__ripple"></div>
    <i class="material-icons mdc-button__icon" aria-hidden="true">exit_to_app</i>
      <span class="mdc-button__label">Logout</span></a>
  </button></h2>
  {% if count == 0 %}
    <h3>You don't have any vocabulary sets yet. </h3>
    <br>
  {% endif %}

<h3>Enter the title below to create a new vocabulary set.</h3>
  <form method="POST" id="TitleForm">
    {% csrf_token %}
    <input id="title" type="text" placeholder="Enter title for your new set:" name="title">
    <button type="submit" form="TitleForm" class="mdc-button mdc-button--raised">CREATE</button>
    {% if messages %}
    {% for message in messages %}
      {{ message }}
    {% endfor %}
    {% endif %}
  </form>

  {% if count > 0 %}
  <br>
  <h3>Below are your existing vocabulary sets.</h3>
  {% endif %}

  {% for i in all_item %}
    {% if i.username == user %}
      <div class="mdc-card">
        <h4 class="card-title">{{ i.slug }}</h4>
          {% for a in details %}
            {% if a.title == i %}      
              {{ a.word }} {{ a.eng }} {{ a.p }}
              </br></br>
            {% endif %}
          {% endfor %}
        <div class="mdc-card__actions">
          <div class="mdc-card__action-buttons">
              <button class="mdc-button mdc-card__action mdc-card__action--button">
                <a href="{% url 'create' i.slug %}">       
              <div class="mdc-button__ripple"></div>
              <span class="mdc-button__label">View {{ i }}</span>
              </a>
            </button>

            <button class="mdc-button mdc-card__action mdc-card__action--button">
              <a href="{% url 'generate-pdf' i.slug %}">
              <div class="mdc-button__ripple"></div>
              <span class="mdc-button__label">Export to PDF</span>
              </a>
            </button>
          </div>
        </div>
      </div>
      <br>
      {% endif %}
    {% endfor %}

  {% else %}
  <h1>Login page</h1>
  <a href="/accounts/login">Sign Up</a>

{% endif %}
{% endblock %}
</div>